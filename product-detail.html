<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>제주도 노지 조생귤 5kg - 10쇼핑게임</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/product-detail.css">
    <link rel="stylesheet" href="css/mypage.css?v=3">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- 상단 유틸 메뉴 -->
    <div class="top-bar">
        <div class="container">
            <ul class="top-menu">
                <li><a href="#"><i class="fas fa-shopping-bag"></i> 주문내역</a></li>
                <li><a href="notice.html"><i class="fas fa-bullhorn"></i> 공지사항</a></li>
                <li><a href="faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
                <li><a href="#"><i class="fas fa-comment"></i> 1:1문의</a></li>
                <li><a href="#"><i class="fas fa-star"></i> 사용후기</a></li>
                <li><a href="#"><i class="fas fa-keyboard"></i> 상품문의</a></li>
            </ul>
        </div>
    </div>

    <!-- 헤더 -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="index.html">
                        <h1>10쇼핑게임</h1>
                    </a>
                </div>
                <div class="search-bar">
                    <form id="searchForm" onsubmit="return handleSearch(event)">
                        <input type="text" id="searchInput" placeholder="검색어를 입력해주세요" required>
                        <button type="submit"><i class="fas fa-search"></i> 검색</button>
                    </form>
                </div>
                <div class="user-menu">
                    <a href="#" class="search-btn"><i class="fas fa-search"></i> 검색</a>
                    <a href="#"><i class="fas fa-user"></i> 로그인</a>
                    <a href="#" class="signup-btn">
                        <i class="fas fa-user-plus"></i> 회원가입
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- 네비게이션 -->
    <nav class="navbar">
        <div class="container">
            <button class="category-btn" id="categoryBtn">
                <i class="fas fa-bars"></i>
                <span>전체카테고리</span>
            </button>
            <ul class="main-nav">
                <li><a href="#"><i class="fas fa-fire"></i> 히트상품</a></li>
                <li><a href="#"><i class="fas fa-thumbs-up"></i> 추천상품</a></li>
                <li><a href="#"><i class="fas fa-sparkles"></i> 최신상품</a></li>
                <li><a href="#"><i class="fas fa-heart"></i> 인기상품</a></li>
            </ul>
        </div>
    </nav>

    <!-- 카테고리 사이드바 -->
    <div class="category-sidebar" id="categorySidebar">
        <div class="sidebar-header">
            <h2>전체카테고리</h2>
            <button class="close-btn" id="closeSidebar">&times;</button>
        </div>
        <div class="sidebar-content">
            <div class="user-quick">
                <a href="#"><i class="fas fa-sign-in-alt"></i> 로그인</a>
                <a href="#"><i class="fas fa-user-plus"></i> 회원가입</a>
            </div>
            <ul class="category-list">
                <li class="has-submenu">
                    <a href="#"><i class="fas fa-paw"></i> 반려동물</a>
                    <ul class="submenu">
                        <li><a href="#">강아지</a></li>
                        <li><a href="#">고양이</a></li>
                    </ul>
                </li>
                <li><a href="#"><i class="fas fa-utensils"></i> 식품</a></li>
                <li><a href="#"><i class="fas fa-pills"></i> 건강보조식품</a></li>
                <li><a href="#"><i class="fas fa-spray-can"></i> 화장품</a></li>
                <li><a href="#"><i class="fas fa-home"></i> 생활용품</a></li>
                <li><a href="#"><i class="fas fa-plug"></i> 가전제품</a></li>
                <li><a href="#"><i class="fas fa-gift"></i> 선물용품</a></li>
                <li class="has-submenu">
                    <a href="#"><i class="fas fa-ticket-alt"></i> e-쿠폰</a>
                    <ul class="submenu">
                        <li><a href="#">커피/음료</a></li>
                        <li><a href="#">치킨/피자</a></li>
                        <li><a href="#">베이커리</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <!-- 브레드크럼 -->
    <div class="breadcrumb">
        <div class="container">
            <ul>
                <li><a href="index.html"><i class="fas fa-home"></i> 홈</a></li>
                <li><i class="fas fa-chevron-right"></i></li>
                <li><a href="#">식품</a></li>
                <li><i class="fas fa-chevron-right"></i></li>
                <li>제주도 노지 조생귤 5kg</li>
            </ul>
        </div>
    </div>

    <!-- 상품 상세 -->
    <section class="product-detail">
        <div class="container">
            <div class="product-detail-wrap">
                <!-- 좌측: 상품 이미지 -->
                <div class="product-image-section">
                    <div class="main-image">
                        <img src="https://placehold.co/600x600/E0E0E0/999?text=No+Image" alt="상품 이미지" id="mainImage">
                        <button class="zoom-btn"><i class="fas fa-search-plus"></i> 확대보기</button>
                    </div>
                </div>

                <!-- 우측: 상품 정보 -->
                <div class="product-info-section">
                    <div class="product-header">
                        <span class="category-tag" id="categoryTag"><i class="fas fa-tag"></i> 카테고리</span>
                        <h1 class="product-title product-name">상품명</h1>
                        <p class="product-subtitle" id="productSubtitle">상품 설명</p>
                    </div>

                    <div class="product-support-banner">
                        <i class="fas fa-gift"></i>
                        <span>쇼핑지원금 <strong id="supportAmount">0원</strong></span>
                    </div>

                    <div class="shipping-info">
                        <span class="free-shipping"><i class="fas fa-truck"></i> 무료배송</span>
                    </div>

                    <div class="product-info-table">
                        <table id="productInfoTable">
                            <!-- JavaScript로 동적 생성 -->
                        </table>
                    </div>

                    <div class="product-stats">
                        <div class="stat-item">
                            <span><i class="fas fa-star"></i> 사용후기 (<span id="reviewCount">0</span>) <span class="review-rating-display"></span></span>
                        </div>
                        <div class="stat-item">
                            <span><i class="fas fa-heart"></i> <span id="likeStatus">이 상품을 좋아하는 회원이 없습니다.</span></span>
                        </div>
                    </div>

                    <div class="product-options">
                        <h3>선택옵션</h3>
                        <select class="option-select" id="productOption">
                            <option value="">옵션을 선택해주세요</option>
                        </select>
                    </div>

                    <div class="selected-options" id="selectedOptions">
                        <!-- 선택된 옵션이 여기에 표시됩니다 -->
                    </div>

                    <div class="total-price">
                        <span>총 상품금액</span>
                        <span class="price" id="totalPrice">0원</span>
                    </div>

                    <div class="action-buttons">
                        <button class="btn-wishlist"><i class="far fa-heart"></i> 관심상품</button>
                        <button class="btn-cart"><i class="fas fa-shopping-cart"></i> 장바구니</button>
                        <button class="btn-buy"><i class="fas fa-bolt"></i> 바로구매</button>
                    </div>

                    <div class="share-buttons">
                        <button class="share-btn" data-share="facebook" title="페이스북 공유"><i class="fab fa-facebook-f"></i></button>
                        <button class="share-btn" data-share="instagram" title="인스타그램 공유"><i class="fab fa-instagram"></i></button>
                        <button class="share-btn" data-share="link" title="링크 복사"><i class="fas fa-link"></i></button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 상품 상세 탭 -->
    <section class="product-tabs">
        <div class="container">
            <div class="tabs-header">
                <button class="tab-btn active" data-tab="detail">상품정보</button>
                <button class="tab-btn" data-tab="review">사용후기 <span class="count">0</span></button>
                <button class="tab-btn" data-tab="qna">상품문의 <span class="count">0</span></button>
                <button class="tab-btn" data-tab="shipping">배송/교환</button>
            </div>

            <div class="tabs-content">
                <!-- 상품정보 탭 -->
                <div class="tab-content active" id="detail">
                    <div class="product-description">
                        <h2>상품 상세설명</h2>
                        <div class="description-image">
                            <img src="https://via.placeholder.com/800x1200/FFE082/333?text=상품+상세설명+이미지" alt="상품 상세">
                        </div>
                        <button class="btn-more-desc">상품설명 더보기</button>
                    </div>

                    <div class="product-specification">
                        <h2>상품 정보 고시</h2>
                        <table class="spec-table" id="productSpecTable">
                            <!-- JavaScript로 동적 생성 -->
                        </table>
                    </div>
                </div>

                <!-- 사용후기 탭 -->
                <div class="tab-content" id="review">
                    <div class="review-header">
                        <h2>사용후기</h2>
                        <button class="btn-write"><i class="fas fa-pen"></i> 사용후기 쓰기</button>
                    </div>
                    <div class="review-list-container" id="reviewListContainer">
                        <!-- 후기 목록이 여기에 동적으로 표시됩니다 -->
                    </div>
                    <div class="empty-state" id="reviewEmptyState" style="display: none;">
                        <i class="far fa-comment-dots"></i>
                        <p>사용후기가 없습니다.</p>
                    </div>
                    <div class="pagination-container" id="reviewPaginationContainer" style="display: none; text-align: center; margin-top: 20px; padding: 20px;">
                        <!-- 페이지네이션이 여기에 동적으로 표시됩니다 -->
                    </div>
                    <div class="review-footer">
                        <a href="#" class="btn-view-all">전체보기</a>
                    </div>
                </div>

                <!-- 상품문의 탭 -->
                <div class="tab-content" id="qna">
                    <div class="qna-header">
                        <h2>상품문의</h2>
                        <button class="btn-write" id="btnProductInquiryWrite"><i class="fas fa-pen"></i> 상품문의 쓰기</button>
                    </div>
                    <div class="qna-list-container" id="productInquiryListContainer">
                        <!-- 상품문의 목록이 여기에 동적으로 표시됩니다 -->
                    </div>
                    <div class="empty-state" id="productInquiryEmptyState">
                        <i class="far fa-question-circle"></i>
                        <p>상품문의가 없습니다.</p>
                    </div>
                    <div class="pagination-container" id="inquiryPaginationContainer" style="display: none; text-align: center; margin-top: 20px; padding: 20px;">
                        <!-- 페이지네이션이 여기에 동적으로 표시됩니다 -->
                    </div>
                    <div class="qna-footer">
                        <a href="#" class="btn-view-all">전체보기</a>
                    </div>
                </div>

                <!-- 배송/교환 탭 -->
                <div class="tab-content" id="shipping">
                    <div class="shipping-info-box">
                        <h3><i class="fas fa-truck"></i> 배송 안내</h3>
                        <p>구매가 확정되면 배송이 시작됩니다.</p>
                    </div>
                    <div class="exchange-info-box">
                        <h3><i class="fas fa-exchange-alt"></i> 교환/반품 안내</h3>
                        <p>교환/반품 안내 입력전입니다.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 관련 상품 -->
    <section class="related-products">
        <div class="container">
            <h2 id="relatedProductsTitle">관련상품</h2>
            <div class="product-grid" id="relatedProductsGrid">
                <!-- JavaScript로 동적 생성 -->
            </div>
        </div>
    </section>

    <!-- 하단 구매 바 (고정) -->
    <div class="fixed-bottom-bar">
        <div class="container">
            <div class="bottom-bar-content">
                <button class="btn-home"><i class="fas fa-home"></i> 홈으로</button>
                <button class="btn-wishlist"><i class="far fa-heart"></i> 관심상품</button>
                <button class="btn-buy-fixed"><i class="fas fa-bolt"></i> 바로구매</button>
            </div>
        </div>
    </div>

    <!-- 푸터 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-top">
                <ul class="footer-links">
                    <li><a href="#">회사소개</a></li>
                    <li><a href="#">서비스이용약관</a></li>
                    <li><a href="#"><strong>개인정보처리방침</strong></a></li>
                </ul>
            </div>
            <div class="footer-content">
                <div class="footer-info">
                    <h3>고객센터 정보</h3>
                    <ul>
                        <li>1670-4519</li>
                        <li>평일 오전 9:00 ~ 오후 6:00</li>
                        <li>점심 오후 12:00 ~ 오후 1:00</li>
                        <li>토/일/공휴일 휴무</li>
                    </ul>
                </div>
                <div class="footer-info">
                    <h3>결제 정보</h3>
                    <ul>
                        <li>하나은행 670-910020-22804 (주)딩펫씨큐리티</li>
                        <li>평일 오전 9:00 ~ 오후 6:00</li>
                    </ul>
                </div>
                <div class="footer-info">
                    <h3>배송 정보</h3>
                    <ul>
                        <li>구매가 확정 되면 배송이 시작됩니다.</li>
                    </ul>
                </div>
                <div class="footer-info">
                    <h3>QUICK</h3>
                    <ul>
                        <li><a href="#">공지사항</a></li>
                        <li><a href="#">이벤트</a></li>
                        <li><a href="faq.html">FAQ</a></li>
                        <li><a href="#">1:1문의</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="company-info">
                    <div class="logo-footer">
                        <h2>10쇼핑게임</h2>
                    </div>
                    <p>
                        회사명 (주)딩펫씨큐리티 주소 대전시 유성구 동서대로125 국립 한밭대학교 s9동 101호 사업자 등록번호 768-88-03514<br>
                        대표 송건회 전화 1670-4519 팩스 044-862-0069 통신판매업신고번호 제2025-대전유성-0691호<br>
                        개인정보 보호책임자 송건회 부가통신사업신고번호 12345호
                    </p>
                </div>
                <p class="copyright">Copyright © (주)딩펫씨큐리티. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- 최근 본 상품 퀵메뉴 -->
    <div class="today-viewed">
        <button class="toggle-viewed" id="toggleViewed">
            <i class="fas fa-clock"></i>
            <span class="count">1</span>
        </button>
    </div>

    <!-- 최근 본 상품 사이드 패널 -->
    <div class="viewed-panel" id="viewedPanel">
        <div class="viewed-panel-overlay"></div>
        <div class="viewed-panel-content">
            <div class="viewed-panel-header">
                <button class="viewed-panel-close" id="viewedPanelClose">
                    <i class="fas fa-times"></i>
                </button>
                <h3>최근 본 상품 <span class="viewed-count-badge" id="viewedCountBadge">1</span></h3>
            </div>
            <div class="viewed-panel-body">
                <div class="viewed-list" id="viewedList">
                    <div class="viewed-item">
                        <img src="https://via.placeholder.com/80x80/FFE082/333?text=귤" alt="제주도 노지 조생귤">
                        <div class="viewed-item-info">
                            <p>닥터포밸런스 견활력 애견영양간식</p>
                            <span class="price">54,900원</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="viewed-panel-footer">
                <button class="btn-clear-all" id="btnClearAll">전체삭제</button>
            </div>
        </div>
    </div>

    <!-- 장바구니 모달 -->
    <div class="cart-modal" id="cartModal">
        <div class="modal-content">
            <div class="modal-header">
                <i class="fas fa-check-circle"></i>
                <p>장바구니에 상품이 정상적으로 담겼습니다.</p>
            </div>
            <div class="modal-actions">
                <button class="btn-continue" id="continueBtn">쇼핑계속하기</button>
                <button class="btn-go-cart" id="goCartBtn">장바구니 이동</button>
            </div>
        </div>
    </div>

    <!-- 바로구매 배송지 선택 모달 -->
    <div class="buy-now-delivery-modal" id="buyNowDeliveryModal">
        <div class="buy-now-modal-content">
            <div class="buy-now-modal-header">
                <h3>배송지 선택</h3>
                <button type="button" class="buy-now-modal-close" id="buyNowDeliveryModalClose" aria-label="닫기">&times;</button>
            </div>
            <div class="buy-now-modal-body">
                <div class="delivery-option-list">
                    <label class="delivery-option-item">
                        <input type="radio" name="deliverySource" value="profile" checked>
                        <span class="delivery-option-label">회원 정보의 주소</span>
                        <p class="delivery-option-summary" id="deliveryOptionProfileSummary">-</p>
                    </label>
                    <label class="delivery-option-item">
                        <input type="radio" name="deliverySource" value="default">
                        <span class="delivery-option-label">기본 배송지</span>
                        <p class="delivery-option-summary" id="deliveryOptionDefaultSummary">등록된 기본 배송지가 없습니다.</p>
                    </label>
                    <label class="delivery-option-item">
                        <input type="radio" name="deliverySource" value="new">
                        <span class="delivery-option-label">새로 입력</span>
                        <p class="delivery-option-summary" id="deliveryOptionNewHint">선택 시 아래에 주소를 입력합니다.</p>
                    </label>
                </div>
                <div class="delivery-recipient-fields">
                    <p class="delivery-recipient-desc">받는사람과 연락처는 기본값을 그대로 쓰거나 수정할 수 있습니다.</p>
                    <div class="form-row">
                        <label for="deliveryRecipient">받는사람</label>
                        <input type="text" id="deliveryRecipient" placeholder="받는사람 이름" maxlength="30">
                    </div>
                    <div class="form-row">
                        <label for="deliveryPhone">연락처</label>
                        <input type="text" id="deliveryPhone" placeholder="연락처" maxlength="20">
                    </div>
                </div>
                <div class="delivery-new-form" id="deliveryNewForm" style="display: none;">
                    <div class="form-row">
                        <label for="deliveryNewPostcode">우편번호</label>
                        <input type="text" id="deliveryNewPostcode" placeholder="우편번호">
                    </div>
                    <div class="form-row">
                        <label for="deliveryNewAddress">주소</label>
                        <input type="text" id="deliveryNewAddress" placeholder="주소">
                    </div>
                    <div class="form-row">
                        <label for="deliveryNewDetailAddress">상세주소</label>
                        <input type="text" id="deliveryNewDetailAddress" placeholder="상세주소" maxlength="100">
                    </div>
                </div>
            </div>
            <div class="buy-now-modal-footer">
                <button type="button" class="btn-buy-now-cancel" id="buyNowDeliveryCancel">취소</button>
                <button type="button" class="btn-buy-now-submit" id="buyNowDeliverySubmit">구매하기</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/visitor-logger.js"></script>
    
    <!-- SNS 공유 유틸리티 -->
    <script src="js/share-utils.js?v=4"></script>
    
    <!-- 상품후기 작성 모달 -->
    <div id="reviewModal" class="modal" style="display: none;">
        <div class="modal-content inquiry-modal-content">
            <div class="modal-header inquiry-modal-header">
                <div class="inquiry-modal-title-wrap">
                    <i class="fas fa-star" style="color: #4A5FC1; margin-right: 10px; font-size: 20px;"></i>
                    <h3>상품후기 작성</h3>
                </div>
                <button type="button" class="modal-close" id="reviewModalClose">&times;</button>
            </div>
            <div class="modal-body inquiry-modal-body">
                <input type="hidden" id="reviewId" value="">
                <div class="inquiry-form-group">
                    <label class="inquiry-label">
                        <span class="label-text">평점</span>
                        <span class="required-badge">필수</span>
                    </label>
                    <div class="rating-input" style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                        <div class="star-rating" id="reviewRating" style="display: flex; gap: 5px;">
                            <i class="far fa-star star-icon" data-rating="1" style="font-size: 28px; color: #ddd; cursor: pointer; transition: all 0.2s;"></i>
                            <i class="far fa-star star-icon" data-rating="2" style="font-size: 28px; color: #ddd; cursor: pointer; transition: all 0.2s;"></i>
                            <i class="far fa-star star-icon" data-rating="3" style="font-size: 28px; color: #ddd; cursor: pointer; transition: all 0.2s;"></i>
                            <i class="far fa-star star-icon" data-rating="4" style="font-size: 28px; color: #ddd; cursor: pointer; transition: all 0.2s;"></i>
                            <i class="far fa-star star-icon" data-rating="5" style="font-size: 28px; color: #ddd; cursor: pointer; transition: all 0.2s;"></i>
                        </div>
                        <span id="reviewRatingText" style="color: #666; font-size: 14px; margin-left: 10px;">평점을 선택해주세요</span>
                        <input type="hidden" id="reviewRatingValue" value="0" required>
                    </div>
                </div>
                <div class="inquiry-form-group">
                    <label class="inquiry-label">
                        <span class="label-text">제목</span>
                        <span class="required-badge">필수</span>
                    </label>
                    <input type="text" class="inquiry-input" id="reviewTitle" placeholder="후기 제목을 입력해주세요" required>
                </div>
                <div class="inquiry-form-group">
                    <label class="inquiry-label">
                        <span class="label-text">후기 내용</span>
                        <span class="required-badge">필수</span>
                    </label>
                    <textarea class="inquiry-textarea" id="reviewContent" rows="8" placeholder="상품에 대한 후기를 자세히 입력해주세요.&#10;예: 사용감, 품질, 만족도 등" required></textarea>
                    <div class="textarea-counter">
                        <span id="reviewContentCounter">0</span> / 1000자
                    </div>
                </div>
            </div>
            <div class="modal-footer inquiry-modal-footer">
                <button type="button" class="btn-inquiry-cancel" id="reviewModalCancel">
                    <i class="fas fa-times"></i> 취소
                </button>
                <button type="button" class="btn-inquiry-submit" id="reviewModalSave">
                    <i class="fas fa-paper-plane"></i> 후기 작성
                </button>
            </div>
        </div>
    </div>

    <!-- 상품문의 작성 모달 -->
    <div id="productInquiryModal" class="modal" style="display: none;">
        <div class="modal-content inquiry-modal-content">
            <div class="modal-header inquiry-modal-header">
                <div class="inquiry-modal-title-wrap">
                    <i class="fas fa-shopping-bag" style="color: #4A5FC1; margin-right: 10px; font-size: 20px;"></i>
                    <h3>상품문의 작성</h3>
                </div>
                <button type="button" class="modal-close" id="productInquiryModalClose">&times;</button>
            </div>
            <div class="modal-body inquiry-modal-body">
                <input type="hidden" id="productInquiryId" value="">
                <div class="inquiry-form-group">
                    <label class="inquiry-label">
                        <span class="label-text">제목</span>
                        <span class="required-badge">필수</span>
                    </label>
                    <input type="text" class="inquiry-input" id="productInquiryTitle" placeholder="문의하실 내용의 제목을 입력해주세요" required>
                </div>
                <div class="inquiry-form-group">
                    <label class="inquiry-label">
                        <span class="label-text">문의 내용</span>
                        <span class="required-badge">필수</span>
                    </label>
                    <textarea class="inquiry-textarea" id="productInquiryContent" rows="8" placeholder="상품에 대한 문의 내용을 자세히 입력해주세요.&#10;예: 사이즈, 색상, 재질, 배송 등" required></textarea>
                    <div class="textarea-counter">
                        <span id="productInquiryContentCounter">0</span> / 1000자
                    </div>
                </div>
            </div>
            <div class="modal-footer inquiry-modal-footer">
                <button type="button" class="btn-inquiry-cancel" id="productInquiryModalCancel">
                    <i class="fas fa-times"></i> 취소
                </button>
                <button type="button" class="btn-inquiry-submit" id="productInquiryModalSave">
                    <i class="fas fa-paper-plane"></i> 문의하기
                </button>
            </div>
        </div>
    </div>

    <script src="js/script.js?v=23"></script>
    <script src="js/product-detail.js?v=24"></script>
</body>
</html>
